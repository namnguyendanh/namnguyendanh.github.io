---
title: (Draft) React
toc: true
categories:
    - Technology
tags:
    - library
    - react
---
MÃ¬nh hÆ°á»›ng Ä‘áº¿n Fullstack Developer tháº¿ nÃªn React lÃ  má»™t cÃ´ng nghá»‡ khÃ´ng thá»ƒ bá» qua.

## CÃ i Ä‘áº·t
CÃ³ ráº¥t nhiá»u cÃ¡ch Ä‘á»ƒ sá»­ dá»¥ng React trong project: táº¡o má»™t project má»›i, hoáº·c chÃ¨n React vÃ o projec hiá»‡n táº¡i. CÃ¡ch dÆ°á»›i Ä‘Ã¢y lÃ  táº¡o má»™t project má»›i sá»­ dá»¥ng Create React App.

```bash
sudo apt-get install nodejs
sudo apt-get install npm

# Create new project: (requirement Node=>8.10, npm>=5.6)
npx create-react-app my-app
cd my-app
npm start
```
LÆ°u Ã½ khi cháº¡y lá»‡nh start trÃªn WSL nÃ³ sáº½ khÃ´ng auto reload. Pháº£i chuyá»ƒn folder vá» home directory má»›i cháº¡y.

Khi nÃ o muá»‘n deploy to production thÃ¬ cháº¡y:
```bash
npm run build
```

NgoÃ i ra cÃ³ má»™t cÃ¡ch ná»¯a Ä‘Ã³ lÃ  dÃ¹ng CDN, trong Ä‘áº¥y chá»©a cáº£ React vÃ  ReactDOM.

## JSX
JSX: syntax extension to JS. React project cÃ³ thá»ƒ ko dÃ¹ng jsx váº«n Ä‘c.
E.g: const element = <h1>Hello, world!</h1>;
JSX táº¡o React "elements". NÃ³i má»™t cÃ¡ch khÃ¡c thÃ¬ JSX giÃºp 'blend' giá»¯a code vÃ  UI element. 
	* 
CÃ³ thá»ƒ chÃ¨n JS object (function cÅ©ng lÃ  má»™t loáº¡i object) vÃ o trong JSX thÃ´ng qua { }.
	* 
CÃ³ thá»ƒ dÃ¹ng JSX Ä‘á»ƒ Ä‘á»‹nh nghÄ©a React element trong JS.



Hiá»ƒu sÃ¢u hÆ¡n: thg Babel nÃ³ sáº½ compile JSX vá» React.createElement() call.

## Rendering an Element into the DOM
E.g:
const element = <h1>Hello, world</h1>;
ReactDOM.render(element, document.getElementById('root'));

React element are immutable. Tháº¿ nÃªn, ReactDOM sáº½ pháº£i render láº¡i element má»›i náº¿u muá»‘n thay Ä‘á»•i. Tuy nhiÃªn thá»±c ra khÃ´ng pháº£i tháº¿. -> Sá»­ dá»¥ng stateful components.

ReactDOM chá»‰ render nhá»¯ng thay Ä‘á»•i cáº§n thiáº¿t.

## Components and Props
Component giá»‘ng nhÆ° func, nÃ³ cháº¥p nháº­n Ä‘áº§u vÃ o lÃ  props vÃ  tráº£ vá» React element. CÃ³ 2 loáº¡i component: function-based, class-based (ES6). 
LÆ°u Ã½: luÃ´n viáº¿t hoa Component, náº¿u khÃ´ng react sáº½ nháº§m nÃ³ vá»›i DOM tags.

```javascript
class Welcome extends React.Component {
    render() {
        return <h1>Hello, {this.props.name}</h1>;
}}

ReactDOM.render(
element,
function Welcome(props) {
const element = <Welcome name="Sara" />;
document.getElementById('root'));
```
Attribute name á»Ÿ Ä‘Ã¢y Ä‘Æ°á»£c coi lÃ  má»™t prop vÃ  cÃ³ thá»ƒ truy cáº­p trong Welcome sá»­ dá»¥ng props.name. 
LÆ°u Ã½: Props lÃ  read-only.

## State and Lifecycle
State cÅ©ng khÃ¡ giá»‘ng vá»›i props, cÃ³ Ä‘iá»u lÃ  nÃ³ hoÃ n toÃ n Ä‘Æ°á»£c kiá»ƒm soÃ¡t bá»Ÿi component, cÃ¡c component khÃ¡c khÃ´ng thá»ƒ biáº¿t Ä‘Æ°á»£c, cÅ©ng nhÆ° khÃ´ng quan tÃ¢m (tÃ­nh encapsulation). CÃ³ thá»ƒ truy cáº­p báº±ng this.state.<statename>. Má»i state Ä‘Æ°á»£c init trong hÃ m constructor() cá»§a class. 
Táº¥t nhiÃªn, mÃ¬nh cÅ©ng cÃ³ thá»ƒ táº¡o ra cÃ¡c additional fields trong class náº¿u nÃ³ khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n data flow.

Äiá»ƒm hay cá»§a JS Ä‘Ã³ lÃ  nÃ³ lÃ  event-driven language. Trong component cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a má»™t sá»‘ function Ä‘á»ƒ handle event:
- componentDidMount()
- componentWillUnmount()


LÆ°u Ã½:
KhÃ´ng nÃªn modify state trá»±c tiáº¿p: this.state.comment = 'Hello'; (chá»‰ nÃªn dÃ¹ng trong constructor).
mÃ  nÃªn dÃ¹ng this.setState({comment: 'Hello'});

State updates lÃ  báº¥t Ä‘á»“ng bá»™. React cÃ³ thá»ƒ gá»™p nhiá»u setState() vÃ o 1 update Ä‘á»ƒ Ä‘áº£m báº£o performance.

```javascript
// Wrong
this.setState({
    counter: this.state.counter + this.props.increment,
});
// Correct
this.setState((state, props) => ({
    counter: state.counter + props.increment
}));
```

VÃ¬ cháº¡y báº¥t Ä‘á»“ng bá»™, nÃªn tá»‘t nháº¥t lÃ  state khÃ´ng nÃªn phá»¥ thuá»™c vÃ o previous state. Äá»ƒ giáº£i quyáº¿t thÃ¬, setState cÃ³ thá»ƒ nháº­n vÃ o function thay vÃ¬ lÃ  object. Äiá»u nÃ y cÃ³ lá»£i hÆ¡n vÃ¬ function Ä‘Ã³ sáº½ nháº­n previous state, Ä‘áº£m báº£o ráº±ng update sáº½ hoáº¡t Ä‘á»™ng Ä‘Ãºng trong báº¥t Ä‘á»“ng bá»™.

## Handling Events
```js
class Toggle extends React.Component {
constructor(props) {
super(props);
this.state = {isToggleOn: true};

// This binding is necessary to make `this` work in the callback
this.handleClick = this.handleClick.bind(this);
}
```
Trong JS (ko liÃªn quan Ä‘áº¿n React), class method khÃ´ng Ä‘Æ°á»£c bind sáºµn, tháº¿ nÃªn tá»‘t nháº¥t lÃ  bind trong constructor.

```js
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>
<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>
```
2 DÃ²ng trÃªn lÃ  nhÆ° nhau, má»™t cÃ¡i sá»­ dá»¥ng arrow functions, má»™t cÃ¡i dÃ¹ng Function.prototype.bind.

## Conditional rendering
Component cÃ³ thá»ƒ kiá»ƒm soÃ¡t render (cá»¥ thá»ƒ lÃ  kiá»ƒm soÃ¡t thá»© sáº½ return) sá»­ dá»¥ng props hoáº·c states.

Trong JS: true && expression tráº£ vá» expression, false && expression tráº£ vá» false. (tá»‡ vl, thá» ğŸ™‚). Anw, cÅ©ng cÃ³ thá»ƒ sá»­ dá»¥ng ternary operator.
KhÃ´ng muá»‘n tráº£ vá» gÃ¬ thÃ¬ cÃ³ thá»ƒ return null.

## Lists and Keys
Key: cÃ¡i nÃ y má»›i nÃ y, khi táº¡o list of element báº±ng hÃ m .map() thÃ¬ nÃªn prop.key vÃ o element. LÆ°u Ã½ ráº±ng, key (unique among siblings) á»Ÿ Ä‘Ã¢y giÃºp React indentify item nÃ o thay Ä‘á»•i, thÃªm, xÃ³a. Element sáº½ khÃ´ng thá»ƒ truy cáº­p Ä‘c key, náº¿u cáº§n thÃ¬ sá»­ dá»¥ng prop khÃ¡c cÃ¹ng value lÃ  Ä‘Æ°á»£c.

## Forms
ThÃ´ng thÆ°á»ng thÃ¬ HTML form sáº½ kiá»ƒm soÃ¡t state cá»§a riÃªng nÃ³. MÃ¬nh cÃ³ thá»ƒ gá»™p nÃ³ vÃ o vá»›i React state Ä‘á»ƒ táº¡o "single source of truth". LÃºc Ä‘Ã³ nÃ³ sáº½ trá»Ÿ thÃ nh controlled component.

Tuy nhiÃªn Ä‘á»‘i vá»›i input tag, thÃ¬ giÃ¡ trá»‹ cá»§a nÃ³ lÃ  read-only. Tháº¿ nÃªn nÃ³ lÃ  uncontrolled component.

## Lifting State Up
CÃ¡c state lÃ  local, tháº¿ nÃªn sáº½ xáº£y ra váº¥n Ä‘á» náº¿u muá»‘n Ä‘á»“ng bá»™ cÃ¡c state cá»§a cÃ¡c component vá»›i nhau. (Redux lÃ  má»™t cÃ¡ch Ä‘á»ƒ táº¡o 'global states')

CÃ¡ch xá»­ lÃ½ á»Ÿ Ä‘Ã¢y lÃ  biáº¿n children components thÃ nh "controlled", thay vÃ¬ dÃ¹ng local state thÃ¬ chÃºng sáº½ Ä‘Æ°á»£c kiá»ƒm soÃ¡t báº±ng prop. VÃ  cÃ¡i prop nÃ y thÃ¬ lÃ  state cá»§a parent component. 

NhÆ°ng thá»±c ra cÃ¡ch Ä‘áº¥y khÃ¡ lÃ  rá»‘i, sá»­ dá»¥ng Redux Ä‘á»ƒ táº¡o 'single source of truth' sáº½ dá»… quáº£n lÃ½ hÆ¡n. KhÃ´ng pháº£i thay Ä‘á»•i cáº¥u trÃºc cá»§a children components.

## Composition and Inheritance
CÃ³ 2 cÃ¡ch Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng code, thÃ¬ nÃªn sá»­ dá»¥ng composition thay vÃ¬ inheritance (cÃ¡ch nÃ y gáº§n nhÆ° FB ko sá»­ dá»¥ng).

VÃ¬ React component cÅ©ng lÃ  object, tháº¿ nÃªn hoÃ n toÃ n cÃ³ thá»ƒ pass xuá»‘ng dÆ°á»›i dáº¡ng props. Äiá»u nÃ y cÃ³ lá»£i khi muá»‘n táº¡o placeholder cho má»™t sá»‘ component chÆ°a Ä‘c sinh ra.

Vá»›i React, thÃ¬ cÃ³ khÃ¡i niá»‡m specialization (ngÆ°á»£c vá»›i generalization). NÃ³ khÃ¡c vá»›i viá»‡c inheritance, dÃ¹ cÃ³ váº» khÃ¡c giá»‘ng. Vá»›i specialization thÃ¬ lÃ  Ä‘á»‹nh nghÄ©a má»™t component chi tiáº¿t tá»« má»™t generic component (chá»§ yáº¿u lÃ  á»Ÿ pháº§n render() ).

## Thinking in React
- BÆ°á»›c 1: tÃ¡ch UI thÃ nh há»‡ thá»‘ng cÃ¡c components
- BÆ°á»›c 2: xÃ¢y dá»±ng static components trÆ°á»›c (ko sá»­ dá»¥ng state)
- BÆ°á»›c 3: XÃ¡c Ä‘á»‹nh cÃ¡c UI state tá»‘i thiá»ƒu cáº§n thiáº¿t.
- BÆ°á»›c 4: xÃ¡c Ä‘á»‹nh xem cÃ¡c state nÃªn Ä‘Æ°á»£c Ä‘Æ°a vÃ o component nÃ o
- BÆ°á»›c 5: ThÃªm inverse data flow (khi cÃ³ ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c).

## References
- Docs
